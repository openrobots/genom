%%
%% Anthony Mallet - Tue Feb 27 2001
%% Copyright (C) 2001 LAAS/CNRS 
%%
%% $Id$
%%

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{docversion}[2001/02/27]

\def\cvs@skipbeg#1: {}
\def\cvs@skiptoend#1 ${#1}%$
\def\cvs@skipdot#1.{}
\def\cvs@keepdot#1.#2 ${#1}%$

\def\cvsrevision#1{
   \def\thecvsmajor{\expandafter\cvs@keepdot\cvs@skipbeg#1\relax}
   \def\thecvsminor{\expandafter\cvs@skiptoend\expandafter\cvs@skipdot\cvs@skipbeg#1}
   \gdef\thecvsrevision{$\fam1 \thecvsmajor.\thecvsminor$}
}

\def\ifcvslang#1#2{%
   \expandafter\ifx\csname l@#1\endcsname\relax\else%
      \expandafter\ifnum\csname l@#1\endcsname=\language%
	 #2\relax%
      \fi%
   \fi%
}

\def\cvs@year#1/#2 ${#1}%$
\def\cvs@month#1/#2 ${#1}%$
\def\cvs@day#1 #2 ${#1}%$
\def\cvs@skipslash#1/{}

\def\cvsdate#1{
   \def\cvs@theyear{\expandafter\cvs@year\cvs@skipbeg#1}
   \def\cvs@themonth{\expandafter\cvs@month\cvs@skipslash#1}
   \def\cvs@theday{
      \expandafter\cvs@day\expandafter\cvs@skipslash\cvs@skipslash#1}

   \ifcvslang{francais}{
      \def\cvs@Fmonth{
	 \ifcase\cvs@themonth\or janvier\or f\'evrier\or mars\or avril\or
	    mai\or juin\or juillet\or ao\^ut\or septembre\or octobre \or
	    novembre\or d\'ecembre
	 \fi
      }
   }
   \ifcvslang{english}{
      \def\cvs@Fmonth{
	 \ifcase\cvs@themonth\or January\or February\or March\or April\or
	    May\or June\or July\or August\or September\or October \or
	    November\or December
	 \fi
      }
   }

   \ifcvslang{francais}{
      \gdef\thecvsdate{$\fam1 \cvs@theday$\ \cvs@Fmonth\ $\fam1 \cvs@theyear$} 
   }
   \ifcvslang{english}{
      \gdef\thecvsdate{\cvs@Fmonth\ $\fam1 \cvs@theday$, $\fam1 \cvs@theyear$} 
   }
}


\def\cvs@cdoublepage{\newpage{\pagestyle{empty}\cleardoublepage}}

\def\docversiontag{
   \ifodd\c@page\cvs@cdoublepage\else\clearpage\fi
   \thispagestyle{empty}
   \if@twocolumn
      \onecolumn\@tempswatrue
   \else
      \@tempswafalse
   \fi
   \null\vfill{%
      \scriptsize%
      \ifcvslang{francais}{
         \hfill\hbox{--- \thecvsdate, révision \thecvsrevision\ ---}\hfill
      }
      \ifcvslang{english}{
         \hfill\hbox{--- \thecvsdate. Revision \thecvsrevision\ ---}\hfill
      }
   }
}